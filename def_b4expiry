import calendar
"To get the date one day before expiry. Useful for IV calculations" 
def b4expiry(year):
    
    expiry_list=[]
    for n in range(1,13):
        month = n
        #print('month ',month)
    
        last_day = calendar.monthrange(year, month)[1]
        day_month = calendar.weekday(year, month, last_day) #0 is monday and 3 is Thu
        week = [2,3,4,5,6,0,1]
        days = -1
        
            
        for i in week:
            days +=1
            if i == day_month:
                break
        
       
        date_thu = last_day- days
        expiry = str(date_thu)+"-"+str(month)+"-"+str(year)
        #print(expiry)
        expiry_list.append(expiry)    
    return(expiry_list)

