import calendar

def expiry(year):
    
    expiry_list=[]
    for n in range(1,13):
        month = n
        #print('month ',month)
    
        last_day = calendar.monthrange(year, month)[1]
        day_month = calendar.weekday(year, month, last_day) #0 is monday and 3 is Thu
        #For NSE options. Last Thu of month
        week = [3,4,5,6,0,1,2]
        #For CBOE options. Last Fri of month 
        #week = [4,5,6,0,1,2,3]
        days = -1
        
            
        for i in week:
            days +=1
            if i == day_month:
                break
        
        date_thu = last_day- days
        "zfill function formats single digits to double digits by adding a leading zero which is needed in NSE option url, comment it if not needed"
        month_1 = str(month).zfill(2)
        date_1 = str(date_thu).zfill(2)
        expiry = (date_1)+"-"+(month_1)+"-"+str(year)


        #print(expiry)
        expiry_list.append(expiry)    
    return(expiry_list)

